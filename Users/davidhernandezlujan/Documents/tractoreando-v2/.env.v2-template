# 🚛 Tractoreando v2.0 - Configuración de Entorno
# Plantilla de variables de entorno para la versión 2.0
# Copiar a .env y configurar los valores apropiados

# ===================================
# CONFIGURACIÓN BASE (v1.0)
# ===================================

# Entorno de ejecución
NODE_ENV=development
PORT=5000

# Base de datos MongoDB
MONGODB_URI=mongodb://localhost:27017/tractoreando_v2
MONGODB_TEST_URI=mongodb://localhost:27017/tractoreando_v2_test

# Autenticación JWT
JWT_SECRET=your_super_secret_jwt_key_v2_change_this_in_production
JWT_EXPIRE=7d
JWT_REFRESH_SECRET=your_refresh_secret_key_v2
JWT_REFRESH_EXPIRE=30d

# CORS
CORS_ORIGIN=http://localhost:3000

# ===================================
# NUEVAS FUNCIONALIDADES v2.0
# ===================================

# Inteligencia Artificial y Machine Learning
ML_ENABLED=true
ML_API_URL=http://localhost:8000
ML_API_KEY=your_ml_api_key
TENSORFLOW_SERVING_URL=http://localhost:8501
ML_MODEL_PATH=/models/predictive_maintenance
ML_TRAINING_SCHEDULE=0 2 * * 0  # Weekly at 2 AM Sunday

# Configuración de Redis para Cache y ML
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_ML_DB=1
CACHE_TTL=3600

# Elasticsearch para búsqueda avanzada
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_INDEX=tractoreando_v2

# ===================================
# APLICACIÓN MÓVIL
# ===================================

# Configuración de App Móvil
MOBILE_APP_ENABLED=true
MOBILE_API_VERSION=v2
MOBILE_SYNC_INTERVAL=300000  # 5 minutes
OFFLINE_STORAGE_LIMIT=100MB

# Push Notifications
FCM_SERVER_KEY=your_firebase_server_key
FCM_SENDER_ID=your_firebase_sender_id
APNS_KEY_ID=your_apns_key_id
APNS_TEAM_ID=your_apns_team_id
APNS_BUNDLE_ID=com.tractoreando.v2

# ===================================
# IoT Y CONECTIVIDAD
# ===================================

# MQTT Broker para IoT
MQTT_BROKER_URL=mqtt://localhost:1883
MQTT_USERNAME=tractoreando_iot
MQTT_PASSWORD=your_mqtt_password
MQTT_CLIENT_ID=tractoreando_v2_server
MQTT_KEEP_ALIVE=60

# Configuración de dispositivos IoT
IOT_ENABLED=true
IOT_DEVICE_TIMEOUT=30000
IOT_DATA_RETENTION_DAYS=365
IOT_ALERT_THRESHOLD_ENGINE_TEMP=95
IOT_ALERT_THRESHOLD_FUEL_LEVEL=10

# Geofencing y GPS
GPS_TRACKING_ENABLED=true
GPS_UPDATE_INTERVAL=30000  # 30 seconds
GEOFENCE_ALERT_ENABLED=true
MAP_API_KEY=your_google_maps_api_key

# ===================================
# ANÁLISIS FINANCIERO
# ===================================

# Configuración financiera
FINANCIAL_MODULE_ENABLED=true
CURRENCY_DEFAULT=USD
CURRENCY_API_KEY=your_currency_api_key
FUEL_PRICE_API_URL=https://api.fuelprices.com/v1
FUEL_PRICE_API_KEY=your_fuel_api_key

# ROI y análisis de costos
ROI_CALCULATION_PERIOD=12  # months
COST_ANALYSIS_ENABLED=true
BUDGET_ALERTS_ENABLED=true
FINANCIAL_FORECAST_MONTHS=6

# ===================================
# SOSTENIBILIDAD
# ===================================

# Monitoreo ambiental
SUSTAINABILITY_MODULE_ENABLED=true
CARBON_FOOTPRINT_ENABLED=true
CO2_CALCULATION_METHOD=EPA  # EPA, EU, CUSTOM
EMISSION_FACTOR_GASOLINE=2.31  # kg CO2 per liter
EMISSION_FACTOR_DIESEL=2.68   # kg CO2 per liter

# Metas de sostenibilidad
CARBON_REDUCTION_TARGET=20  # percentage
FUEL_EFFICIENCY_TARGET=15   # percentage improvement
GREEN_REPORTING_ENABLED=true

# ===================================
# BLOCKCHAIN
# ===================================

# Configuración de Blockchain
BLOCKCHAIN_ENABLED=false
BLOCKCHAIN_NETWORK=private
BLOCKCHAIN_RPC_URL=http://localhost:8545
BLOCKCHAIN_PRIVATE_KEY=your_blockchain_private_key
SMART_CONTRACT_ADDRESS=0x...
GAS_LIMIT=500000
GAS_PRICE=20000000000  # 20 gwei

# ===================================
# INTEGRACIONES
# ===================================

# APIs de terceros
THIRD_PARTY_INTEGRATIONS_ENABLED=true
API_RATE_LIMIT=1000  # requests per hour
WEBHOOK_SECRET=your_webhook_secret

# ERP Integrations
SAP_INTEGRATION_ENABLED=false
SAP_API_URL=
SAP_USERNAME=
SAP_PASSWORD=

ORACLE_INTEGRATION_ENABLED=false
ORACLE_API_URL=
ORACLE_API_KEY=

# CRM Integrations
SALESFORCE_INTEGRATION_ENABLED=false
SALESFORCE_CLIENT_ID=
SALESFORCE_CLIENT_SECRET=
SALESFORCE_USERNAME=
SALESFORCE_PASSWORD=

# ===================================
# SEGURIDAD AVANZADA
# ===================================

# OAuth 2.0
OAUTH_ENABLED=true
OAUTH_GOOGLE_CLIENT_ID=your_google_client_id
OAUTH_GOOGLE_CLIENT_SECRET=your_google_client_secret
OAUTH_MICROSOFT_CLIENT_ID=your_microsoft_client_id
OAUTH_MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret

# Two-Factor Authentication
TWO_FA_ENABLED=true
TWO_FA_ISSUER=Tractoreando_v2
TWO_FA_WINDOW=2

# Encriptación
ENCRYPTION_KEY=your_32_character_encryption_key
ENCRYPTION_ALGORITHM=aes-256-gcm

# Audit Logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years
AUDIT_LOG_LEVEL=info

# ===================================
# MONITOREO Y OBSERVABILIDAD
# ===================================

# Prometheus metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENDPOINT=/metrics

# Grafana
GRAFANA_URL=http://localhost:3001
GRAFANA_API_KEY=your_grafana_api_key

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/tractoreando_v2.log
LOG_MAX_SIZE=10MB
LOG_MAX_FILES=5

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ===================================
# MÓDULOS SECTORIALES
# ===================================

# Módulo Agrícola
AGRICULTURE_MODULE_ENABLED=false
CROP_MONITORING_ENABLED=false
WEATHER_API_KEY=your_weather_api_key
SOIL_SENSOR_INTEGRATION=false

# Módulo Construcción
CONSTRUCTION_MODULE_ENABLED=false
PROJECT_MANAGEMENT_ENABLED=false
SAFETY_MONITORING_ENABLED=false
EQUIPMENT_UTILIZATION_TRACKING=true

# Módulo Logística
LOGISTICS_MODULE_ENABLED=false
ROUTE_OPTIMIZATION_ENABLED=false
DELIVERY_TRACKING_ENABLED=false
INVENTORY_INTEGRATION_ENABLED=false

# Módulo Minería
MINING_MODULE_ENABLED=false
MINING_SAFETY_PROTOCOLS=false
ENVIRONMENTAL_MONITORING=false
PRODUCTION_TRACKING=false

# ===================================
# CONFIGURACIÓN DE DESARROLLO
# ===================================

# Debug y desarrollo
DEBUG_MODE=false
DEVELOPMENT_TOOLS_ENABLED=false
API_DOCUMENTATION_ENABLED=true
SWAGGER_UI_ENABLED=true

# Testing
TEST_DATABASE_CLEANUP=true
TEST_DATA_SEEDING=true
E2E_TESTING_ENABLED=false
PERFORMACE_TESTING_ENABLED=false

# ===================================
# CONFIGURACIÓN DE PRODUCCIÓN
# ===================================

# Clustering
CLUSTER_MODE=false
WORKER_PROCESSES=auto  # auto = CPU cores
MAX_MEMORY_RESTART=1GB

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# Session management
SESSION_SECRET=your_session_secret_v2
SESSION_TIMEOUT=3600000  # 1 hour
SESSION_STORE=redis

# File uploads
UPLOAD_MAX_SIZE=10MB
UPLOAD_ALLOWED_TYPES=jpg,jpeg,png,pdf,doc,docx,xls,xlsx
UPLOAD_STORAGE=local  # local, s3, gcs

# AWS S3 (si se usa)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=tractoreando-v2-uploads

# ===================================
# CONFIGURACIÓN DE EMAIL
# ===================================

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_email_password
EMAIL_FROM=noreply@tractoreando.com

# Email templates
EMAIL_TEMPLATES_ENABLED=true
EMAIL_TEMPLATE_PATH=./templates/emails

# ===================================
# BACKUP Y RECUPERACIÓN
# ===================================

# Backup automático
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE=local  # local, s3, gcs
BACKUP_ENCRYPTION_ENABLED=true

# Disaster recovery
DISASTER_RECOVERY_ENABLED=false
REPLICATION_ENABLED=false
FAILOVER_ENABLED=false

# ===================================
# CONFIGURACIÓN ESPECÍFICA v2.0
# ===================================

# Feature flags
FEATURE_AI_PREDICTIONS=true
FEATURE_MOBILE_APP=true
FEATURE_IOT_INTEGRATION=true
FEATURE_FINANCIAL_ANALYSIS=true
FEATURE_SUSTAINABILITY=true
FEATURE_BLOCKCHAIN=false
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_SECTOR_MODULES=false

# Versioning
API_VERSION=v2
APP_VERSION=2.0.0
MIN_CLIENT_VERSION=2.0.0
DATABASE_SCHEMA_VERSION=2.0

# Migration settings
MIGRATION_FROM_V1=false
MIGRATION_BATCH_SIZE=1000
MIGRATION_TIMEOUT=300000  # 5 minutes

# Performance optimization
CACHE_ENABLED=true
CACHE_STRATEGY=redis
DATABASE_POOLING=true
CONNECTION_POOL_SIZE=10
QUERY_TIMEOUT=30000

# ===================================
# NOTAS DE CONFIGURACIÓN
# ===================================

# IMPORTANTE:
# 1. Cambiar todos los valores 'your_*' por valores reales
# 2. Generar claves seguras para JWT_SECRET, ENCRYPTION_KEY, etc.
# 3. Configurar las URLs de servicios externos según tu infraestructura
# 4. Habilitar solo los módulos que necesites inicialmente
# 5. Revisar y ajustar los límites y timeouts según tu hardware
# 6. En producción, usar variables de entorno del sistema operativo
# 7. Nunca commitear este archivo con valores reales al repositorio

# Para generar claves seguras, usar:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# Para testing, copiar este archivo a .env.test y ajustar valores
# Para producción, copiar a .env.production y configurar apropiadamente